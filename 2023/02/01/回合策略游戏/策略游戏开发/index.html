<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="keywords" content="Hexo Theme Redefine">
    <meta name="description" content="Hexo Theme Redefine">
    <meta name="author" content="A1ent">
    <link rel="canonical" href="http://example.com/2023/02/01/%E5%9B%9E%E5%90%88%E7%AD%96%E7%95%A5%E6%B8%B8%E6%88%8F/%E7%AD%96%E7%95%A5%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91/" />
    <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-redefine.png">
    <link rel="icon" type="image/png" href="/images/QvQ.ico" sizes="192x192">
    <link rel="apple-touch-icon" sizes="180x180" href="/images/QvQ.ico">
    <link rel="shortcut icon" href="/images/QvQ.ico">
    
    <title>
        
            策略游戏开发 |
        
        A1ent
    </title>
    
<link rel="stylesheet" href="/css/style.css">

    <link rel="stylesheet" href="//evan.beee.top/projects/hexo-theme-redefine/v1.0.0/source/css/fonts.css">
    
    <link rel="preconnect" href="https://evan.beee.top" crossorigin>
    <script id="hexo-configurations">
    let REDEFINE = window.REDEFINE || {};
    REDEFINE.hexo_config = {"hostname":"example.com","root":"/","language":"en","path":"search.xml"};
    REDEFINE.theme_config = {"toc":{"enable":true,"number":false,"expand_all":true,"init_open":true},"style":{"primary_color":"#005080","avatar":"/images/Fkz3HkwaEAMhwza.svg","favicon":"/images/QvQ.ico","article_img_align":"center","right_side_width":"210px","content_max_width":"1000px","nav_color":{"left":"#18545A","right":"#F1F2B5","transparency":35},"hover":{"shadow":false,"scale":true},"first_screen":{"enable":true,"background_image":{"light":"/images/101920049_p0.svg","dark":"/images/244.jpg"},"title_color":{"light":"#fff","dark":"#d1d1b6"},"description":"Game Can Make The World Better"},"scroll":{"progress_bar":{"enable":true},"percent":{"enable":true}}},"local_search":{"enable":true,"preload":true},"code_block":{"copy":true,"style":"mac"},"pjax":{"enable":false},"lazyload":{"enable":true},"version":"1.0.0","friend_links":{"columns":2}};
    REDEFINE.language_ago = {"second":"%s seconds ago","minute":"%s minutes ago","hour":"%s hours ago","day":"%s days ago","week":"%s weeks ago","month":"%s months ago","year":"%s years ago"};
  </script>
    
    <link rel="stylesheet" href="//evan.beee.top/projects/hexo-theme-redefine/v1.0.0/source/css/fontawesome.min.css">
    <link rel="stylesheet" href="//evan.beee.top/projects/hexo-theme-redefine/v1.0.0/source/css/brands.min.css">
    <link rel="stylesheet" href="//evan.beee.top/projects/hexo-theme-redefine/v1.0.0/source/css/solid.min.css">
    <link rel="stylesheet" href="//evan.beee.top/projects/hexo-theme-redefine/v1.0.0/source/css/regular.min.css">
    
    
    
<meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="A1ent" type="application/atom+xml">
</head>


<body>
<div class="progress-bar-container">
    
        <span class="scroll-progress-bar"></span>
    

    
</div>


<main class="page-container">

    

    <div class="page-main-content">

        <div class="page-main-content-top">
            <header class="menu-wrapper">
    
    <div class="menu-content">
        <div class="left">
            
            <a class="logo-title" href="/">
                
                A1ent
                
            </a>
        </div>

        <div class="right">
            <!-- PC -->
            <div class="pc">
                <ul class="menu-list">
                    
                        
                            <li class="menu-item">
                                <!-- Menu -->
                                <a class="" 
                                    href="/"  >
                                    
                                        
                                            <i class="fa-regular fa-house"></i>
                                        
                                        HOME
                                    
                                </a>
                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            <li class="menu-item">
                                <!-- Menu -->
                                <a class="" 
                                    href="/archives"  >
                                    
                                        
                                            <i class="fa-regular fa-archive"></i>
                                        
                                        ARCHIVES
                                    
                                </a>
                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            <li class="menu-item">
                                <!-- Menu -->
                                <a class="" 
                                    target="_blank" rel="noopener" href="https://docs.unity.cn/cn/2021.3/ScriptReference/index.html"  >
                                    
                                        
                                            <i class="fa-regular unity"></i>
                                        
                                        UNITY
                                    
                                </a>
                                <!-- Submenu -->
                                
                            </li>
                    
                    
                        <li class="menu-item search search-popup-trigger">
                            <i class="fa-solid fa-magnifying-glass"></i>
                        </li>
                    
                </ul>
            </div>
            <!-- Mobile -->
            <div class="mobile">
                
                    <div class="icon-item search search-popup-trigger"><i class="fa-solid fa-magnifying-glass"></i></div>
                
                <div class="icon-item menu-bar">
                    <div class="menu-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Mobile drawer -->
    <div class="menu-drawer">
        <ul class="drawer-menu-list">
            
                
                    <li class="drawer-menu-item flex-center">
                        <a class="" 
                        href="/"  >
                             
                                
                                    <i class="fa-regular fa-house"></i>
                                
                                HOME
                            
                        </a>
                    </li>
                    <!-- Submenu -->
                    
            
                
                    <li class="drawer-menu-item flex-center">
                        <a class="" 
                        href="/archives"  >
                             
                                
                                    <i class="fa-regular fa-archive"></i>
                                
                                ARCHIVES
                            
                        </a>
                    </li>
                    <!-- Submenu -->
                    
            
                
                    <li class="drawer-menu-item flex-center">
                        <a class="" 
                        target="_blank" rel="noopener" href="https://docs.unity.cn/cn/2021.3/ScriptReference/index.html"  >
                             
                                
                                    <i class="fa-regular unity"></i>
                                
                                UNITY
                            
                        </a>
                    </li>
                    <!-- Submenu -->
                    
            

        </ul>
    </div>

    <div class="window-mask"></div>

</header>


        </div>

        <div class="page-main-content-middle">

            <div class="main-content">

                
                    <div class="fade-in-down-animation">
    <div class="post-page-container">
        <div class="article-content-container">
            <div class="article-title">
                <span class="title-hover-animation"><h1 style="font-size:3rem; font-weight: bold; margin: 10px 0;">策略游戏开发</h1></span>
            </div>

            
                <div class="article-header">
                    <div class="avatar">
                        <img src="/images/Fkz3HkwaEAMhwza.svg">
                    </div>
                    <div class="info">
                        <div class="author">
                            <span class="name">A1ent</span>
                            
                                <span class="author-label">Lv3</span>
                            
                        </div>
                        <div class="meta-info">
                            <div class="article-meta-info">
    <span class="article-date article-meta-item">
        <i class="fa-regular fa-pen-fancy"></i>&nbsp;
        <span class="pc">2023-02-01 14:48:26</span>
        <span class="mobile">2023-02-01 14:48</span>
    </span>
    
    

    
    
        <span class="article-wordcount article-meta-item">
            <i class="fa-regular fa-file-word"></i>&nbsp;<span>4.4k Words</span>
        </span>
    
    
        <span class="article-min2read article-meta-item">
            <i class="fa-regular fa-clock"></i>&nbsp;<span>17 Mins</span>
        </span>
    
    
        <span class="article-pv article-meta-item">
            <i class="fa-regular fa-eye"></i>&nbsp;<span id="busuanzi_value_page_pv"></span>
        </span>
    
</div>

                        </div>
                    </div>
                </div>
            

            <div class="article-content markdown-body">
                <p>[Toc]</p>
<h1 id="Part1-后期处理（这一些效果挺不错的，值得自己去尝试一下）"><a href="#Part1-后期处理（这一些效果挺不错的，值得自己去尝试一下）" class="headerlink" title="Part1.后期处理（这一些效果挺不错的，值得自己去尝试一下）"></a>Part1.后期处理（这一些效果挺不错的，值得自己去尝试一下）</h1><p> 1.1 在Global Volume 的Volume里面 new 一个  Profile</p>
<p>选择 Add   Override  ， 添加 色调映射 (Tonemapping)：色调映射是将图像的 HDR 值重新映射到适合在屏幕上显示的范围内的过程。</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/image-20230201150057497.png"
                      alt="image-20230201150057497"
                ></p>
<p>设置为None时：</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/image-20230201150503644.png"
                      alt="image-20230201150503644"
                ></p>
<p>设置为Neutral时：</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/image-20230201150533568.png"
                      alt="image-20230201150533568"
                ></p>
<p>设置为ACES时：</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/image-20230201150551514.png"
                      alt="image-20230201150551514"
                ></p>
<p>Directional Light 的设置：（改不改变化不大）</p>
<p>主要看个人喜欢</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/image-20230201151155737.png"
                      alt="image-20230201151155737"
                ></p>
<p>再回到Gobal Volume：</p>
<p>Add Override, 添加一个Bloom的组件：</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/image-20230201151459513.png"
                      alt="image-20230201151459513"
                ></p>
<p>该组件的作用是泛光，效果如下：</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/image-20230201151446529.png"
                      alt="image-20230201151446529"
                ></p>
<p>更多详情：<a class="link"   target="_blank" rel="noopener" href="https://docs.unity.cn/cn/2021.1/Manual/PostProcessingOverview.html" >https://docs.unity.cn/cn/2021.1/Manual/PostProcessingOverview.html <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="image-20230201152018680.png"
                      alt="image-20230201152018680" style="zoom:80%;" 
                >

<p>后面的爆炸效果会用到 HDR，请确保它是打开的状态</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="image-20230201152212885.png"
                      alt="image-20230201152212885" style="zoom:67%;" 
                >

<p>注意摄像机的 后期处理（post Processing）</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="image-20230201152315361.png"
                      alt="image-20230201152315361" style="zoom:50%;" 
                >

<p>否则之前的设置将看不见。</p>
<p>再添加一个Vignette 的效果</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/image-20230201152538294.png"
                      alt="image-20230201152538294"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/image-20230201152547068.png"
                      alt="image-20230201152547068"
                ></p>
<p>设置SSAO：（可以让角色看起来更加真实，增加一些阴影部分）</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="image-20230201153134238.png"
                      alt="image-20230201153134238" style="zoom:67%;" 
                >

<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/image-20230201153215539.png"
                      alt="image-20230201153215539"
                ></p>
<h1 id="Part2-单元运动与选择"><a href="#Part2-单元运动与选择" class="headerlink" title="Part2.单元运动与选择"></a>Part2.单元运动与选择</h1><h2 id="1-选择Pivot-而不是Center-："><a href="#1-选择Pivot-而不是Center-：" class="headerlink" title="1.选择Pivot 而不是Center ："></a>1.选择Pivot 而不是Center ：</h2><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/image-20230201155107306.png"
                      alt="image-20230201155107306"
                ></p>
<h2 id="2-单位移动"><a href="#2-单位移动" class="headerlink" title="2.单位移动"></a>2.单位移动</h2><p>移动到指定的地点</p>
<div class="highlight-container" data-rel="C#"><figure class="iseeu highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="built_in">float</span> moveSpeed = <span class="number">6.0f</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> Vector3 targetPosition;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Update</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//停止的距离， 防止在移动到目的地时，发生抖动；</span></span><br><span class="line">        <span class="built_in">float</span> stopDistance = <span class="number">.1</span>f;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//这里不使用 Distance 是 为了减少开销，提高性能；</span></span><br><span class="line">        <span class="comment">// Vector3.Distance(transform.position - targetPosition);</span></span><br><span class="line">        <span class="keyword">if</span> ((transform.position - targetPosition).sqrMagnitude &gt; stopDistance * stopDistance)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">//移动方向 = 目标位置 - 原来位置 ，然后归一化；</span></span><br><span class="line">            Vector3 moveDirection = (targetPosition - transform.position).normalized;</span><br><span class="line"></span><br><span class="line">            transform.position += moveDirection * moveSpeed * Time.deltaTime;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (Input.GetKeyDown(KeyCode.J))</span><br><span class="line">            &#123;</span><br><span class="line">                Move(<span class="keyword">new</span> Vector3(<span class="number">4</span>, <span class="number">0</span>, <span class="number">4</span>));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Move</span>(<span class="params">Vector3 targetPosition</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">this</span>.targetPosition = targetPosition;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="3-鼠标射线"><a href="#3-鼠标射线" class="headerlink" title="3.鼠标射线"></a>3.鼠标射线</h2><p>通过射线来判断鼠标是否在屏幕上</p>
<p>Camera.main 其实等于：</p>
<p>GameObject.FindTagWith(“MainCamera”); &#x2F;&#x2F;而这也是比较消耗性能的</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/image-20230201204732044.png"
                      alt="image-20230201204732044"
                ></p>
<p>ScreenPointToRay：返回从摄像机通过屏幕点的光线。</p>
<p>产生的光线位于世界空间中，从摄像机的近平面开始，并通过屏幕上 位置的 (x,y) 像素坐标（忽略 position.z）。</p>
<p>屏幕空间以像素定义。屏幕的左下角为 (0,0)，右上角为 (<a class="link"   target="_blank" rel="noopener" href="https://docs.unity.cn/cn/2021.3/ScriptReference/Camera-pixelWidth.html" >pixelWidth <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a> -1,<a class="link"   target="_blank" rel="noopener" href="https://docs.unity.cn/cn/2021.3/ScriptReference/Camera-pixelHeight.html" >pixelHeight <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a> -1)。</p>
<div class="highlight-container" data-rel="C#"><figure class="iseeu highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Ray ray = Camera.main.ScreenPointToRay(Input.mousePosition);</span><br><span class="line"></span><br><span class="line">Debug.Log(ray);</span><br></pre></td></tr></table></figure></div>

<h2 id="4-鼠标世界坐标"><a href="#4-鼠标世界坐标" class="headerlink" title="4.鼠标世界坐标"></a>4.鼠标世界坐标</h2><p>添加一个图层属性，用来表示想要鼠标点到地面的图层</p>
<p>先设置一个图层，call： Ground</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/image-20230201210441875.png"
                      alt="image-20230201210441875"
                ></p>
<p>out 关键字 其实就是帮我们创建了一个变量，来保存要击中目标的信息。</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/image-20230201210616701.png"
                      alt="image-20230201210616701"
                ></p>
<div class="highlight-container" data-rel="C#"><figure class="iseeu highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">MouseWorld</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">static</span> MouseWorld instance;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Awake</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//this 关键字指代类的当前实例</span></span><br><span class="line">        instance = <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//测试用</span></span><br><span class="line">    <span class="comment">// private void Update()</span></span><br><span class="line">    <span class="comment">// &#123;</span></span><br><span class="line">    <span class="comment">//     transform.position = GetMousePosition();</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取鼠标点击地面的图层</span></span><br><span class="line">    [<span class="meta">SerializeField</span>]</span><br><span class="line">    LayerMask mousePlaneLayerMask;</span><br><span class="line"></span><br><span class="line"><span class="comment">//类的实例不能访问类的静态方法，因为静态方法本身就是一个实例了，不需要再次实例，直接访问即可</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Vector3 <span class="title">GetMousePosition</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//射线检测鼠标位置</span></span><br><span class="line">        Ray ray = Camera.main.ScreenPointToRay(Input.mousePosition);</span><br><span class="line">        <span class="comment">// Debug.Log(Physics.Raycast(ray));</span></span><br><span class="line"></span><br><span class="line">        Physics.Raycast(ray, <span class="keyword">out</span> RaycastHit hit, <span class="built_in">float</span>.MaxValue, instance.mousePlaneLayerMask);</span><br><span class="line">        <span class="keyword">return</span> hit.point;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="5-通过鼠标点击来进行移动"><a href="#5-通过鼠标点击来进行移动" class="headerlink" title="5.通过鼠标点击来进行移动"></a>5.通过鼠标点击来进行移动</h2><p>这个其实比较简单 ，只要判断是否按下鼠标左键，按下则调用GetPosition()</p>
<div class="highlight-container" data-rel="C#"><figure class="iseeu highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//如果按下鼠标左键，则移动到该点</span></span><br><span class="line">        <span class="keyword">if</span> (Input.GetMouseButton(<span class="number">0</span>))</span><br><span class="line">        &#123;</span><br><span class="line">            Move(MouseWorld.GetMousePosition());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></div>

<h2 id="6-public-与-SerializeField-private"><a href="#6-public-与-SerializeField-private" class="headerlink" title="6.public 与[SerializeField] private"></a>6.public 与[SerializeField] private</h2><h3 id="为什么要使用有时候不使用public-而使用-SerializeField-private-？"><a href="#为什么要使用有时候不使用public-而使用-SerializeField-private-？" class="headerlink" title="为什么要使用有时候不使用public 而使用 [SerializeField] private ？"></a>为什么要使用有时候不使用public 而使用 [SerializeField] private ？</h3><p>有时候我们会去修改一些东西，或者去用UI表示一些信息， 任何的了，任何的代码都可以去基于这个去做更多的功能 和 修改这个字段 。 </p>
<p>但在更复杂的游戏中，干净的代码十分主要，而干净的代码的主要方法是最小化复杂度。最小化复杂性的一个更好的方法就是尽可能的减少访问。</p>
<p>随着游戏的制作， 他们的任意一个都可以对这个属性进行读取，修改和操作，最终只会变得越来越复杂，而我们要记住的东西就要变多。</p>
<p>干净的代码十分的重要。</p>
<h2 id="7-设置动画"><a href="#7-设置动画" class="headerlink" title="7.设置动画"></a>7.设置动画</h2><p>角色动画到 Mixamo   <a class="link"   target="_blank" rel="noopener" href="https://www.mixamo.com/#/" >https://www.mixamo.com/#/ <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a> 里面下载 ， 下载 slim shooter</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/image-20230202093550042.png"
                      alt="image-20230202093550042"
                ></p>
<p>将动画导入Unity 后，将他们的Rig ，Animation Type 改为 Humanoid（人类），点击应用。</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/image-20230202093642272.png"
                      alt="image-20230202093642272"
                ></p>
<p>然后选择 Animation ，这个可以修改我们的动画的名称</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/image-20230202093830380.png"
                      alt="image-20230202093830380"
                ></p>
<p>在 如果是循环的动画，记得勾选 looptime</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/image-20230202093915593.png"
                      alt="image-20230202093915593"
                ></p>
<p>，我们可以通过更改 Root Transform Rotation 来更改自己想要的方向</p>
<p>Body Orientation，身体定向,可以看出他拿枪的方向并不是我们想要的，</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/image-20230202094216385.png"
                      alt="image-20230202094216385"
                ></p>
<p>这时候我们就可以设置为Original</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/image-20230202094259063.png"
                      alt="image-20230202094259063"
                ></p>
<h2 id="8-动画控制器"><a href="#8-动画控制器" class="headerlink" title="8.动画控制器"></a>8.动画控制器</h2><p>新建一个动画控制器 AnimationController ，</p>
<p>我们可以选择 Set as Layer Defalt State ，来设置初始动画</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/image-20230202095207331.png"
                      alt="image-20230202095207331"
                ></p>
<p>当我们设置为Run 时</p>
<p>角色会向前跑动，那是因为我们勾选了Apply Root Motion 根运动，</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/image-20230202095551351.png"
                      alt="image-20230202095551351"
                ></p>
<p>我们选择一个箭头：</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/image-20230202100201369.png"
                      alt="image-20230202100201369"
                ></p>
<h3 id="动画过渡"><a href="#动画过渡" class="headerlink" title="动画过渡"></a>动画过渡</h3><p>动画过渡允许<a class="link"   target="_blank" rel="noopener" href="https://docs.unity.cn/cn/2022.1/Manual/StateMachineBasics.html" >状态机 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a>从一个动画状态切换或混合到另一动画状态。过渡不仅定义状态之间的混合应该耗费多长时间，而且还定义它们应该在什么条件下激活。您可以设置仅在特定条件成立时才发生过渡。要设置这些条件，请在 Animator Controller 中指定参数值。</p>
<p>例如，您的角色可能具有“巡逻”状态和“睡眠”状态。您可以将巡逻和睡眠之间的过渡设置为仅在“alertness”参数值低于某个水平时才会发生。</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/classTransitionAnimatorPreview.jpg"
                      alt="在 Inspector中查看过渡的示例。"
                >在 Inspector中查看过渡的示例。</p>
<p>要为过渡命名，请在字段中输入名称，如下所示：</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/AnimatorTransitionName.png"
                      alt="img"
                ></p>
<p>状态的 Inspector 窗口会显示该状态使用的过渡，如下所示：</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/AnimatorTransitionNameInState.png"
                      alt="img"
                ></p>
<p>在任何给定时间只能有一个激活的过渡。但是，当前激活的过渡可能会被另一个过渡中断（如果已将设置配置为允许此行为，请参阅以下的<a class="link"   target="_blank" rel="noopener" href="https://docs.unity.cn/cn/2022.1/Manual/class-Transition.html#TransitionInterruption" >过渡中断 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a>）。</p>
<h3 id="过渡属性"><a href="#过渡属性" class="headerlink" title="过渡属性"></a>过渡属性</h3><p>要查看某个过渡的属性，请单击 Animator 窗口中连接两个状态的过渡线。这些属性将显示在 Inspector 窗口中。</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/class-Transition-Properties.png"
                      alt="img"
                ></p>
<p>使用以下属性可调整过渡及其在当前状态和下一状态之间如何混合。</p>
<table>
<thead>
<tr>
<th align="left"><strong>属性</strong></th>
<th align="left"><strong>功能</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>Has Exit Time</strong></td>
<td align="left"><strong>Exit Time</strong> 是一种不依赖参数的特殊过渡。但是，它依赖状态的标准化时间。选中此选项可在 <strong>Exit Time</strong> 指定的具体时间进行过渡。</td>
</tr>
<tr>
<td align="left"><strong>Settings</strong></td>
<td align="left">包含详细过渡设置的折叠菜单（如下所示）。</td>
</tr>
<tr>
<td align="left"><strong>Exit Time</strong></td>
<td align="left">如果选中 <strong>Has Exit Time__，此值表示过渡可以生效的确切时间。该时间以标准化时间表示（例如，退出时间为 0.75 表示，在已播放 75% 动画的第一帧上，__Exit Time</strong> 条件为 true）。在下一帧上，该条件为 false。  对于循环动画，每个循环都会评估退出时间小于 1 的过渡，因此可使用此选项在每个循环的动画中以适当时机对过渡进行计时。  对 <strong>Exit Time</strong> 大于 1 的过渡仅评估一次，因此此类过渡可用于在固定循环次数后的特定时间退出。例如，过渡的退出时间为 3.5 的情况下，在三个半循环后对该过渡评估一次。</td>
</tr>
<tr>
<td align="left"><strong>Fixed Duration</strong></td>
<td align="left">如果选中 <strong>Fixed Duration</strong> 复选框，则以秒为单位解读过渡时间。如果未选中 <strong>Fixed Duration</strong> 复选框，则过渡时间解读为源状态的标准化时间的一部分。</td>
</tr>
<tr>
<td align="left"><strong>Transition Duration</strong></td>
<td align="left">相对于当前状态持续时间的过渡持续时间，以标准化时间或秒为单位（具体取决于 <strong>Fixed Duration</strong> 模式）。此时间在过渡图中显示为两个蓝色标记之间的部分。</td>
</tr>
<tr>
<td align="left"><strong>Transition Offset</strong></td>
<td align="left">过渡到的目标状态的起始播放的时间偏移。例如，值为 0.5 表示目标状态在其时间轴的 50% 处开始播放。</td>
</tr>
<tr>
<td align="left"><strong>Interruption Source</strong></td>
<td align="left">此选项用于控制该过渡可能中断的情况（请参阅下文的<a class="link"   target="_blank" rel="noopener" href="https://docs.unity.cn/cn/2022.1/Manual/class-Transition.html#TransitionInterruption" >过渡中断 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a>）。</td>
</tr>
<tr>
<td align="left"><strong>Ordered Interruption</strong></td>
<td align="left">确定当前过渡是否可在不考虑顺序的情况下被其他过渡中断（请参阅下文的<a class="link"   target="_blank" rel="noopener" href="https://docs.unity.cn/cn/2022.1/Manual/class-Transition.html#TransitionInterruption" >过渡中断 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a>）。</td>
</tr>
<tr>
<td align="left"><strong>Conditions</strong></td>
<td align="left">一个过渡可以具有单个条件、多个条件或根本没有条件。如果过渡没有条件，Unity Editor 只会考虑 <strong>Exit Time__，并在达到退出时间时发生过渡。如果过渡有一个或多个条件，则必须满足所有条件才能触发过渡。  一个条件包含：  - 一个事件参数（在条件中考虑其值）。 - 条件谓词（需要时填写，例如，浮点数的“小于”或“大于”）。 - 一个参数值（需要时填写）。  如果为该过渡选择</strong> Has Exit Time__ 并有一个或多个条件，请注意 Unity Editor 在 <strong>Exit Time</strong> 之后考虑条件是否为 true。这样可确保在动画的特定部分中进行过渡。</td>
</tr>
</tbody></table>
<h3 id="过渡中断"><a href="#过渡中断" class="headerlink" title="过渡中断"></a>过渡中断</h3><p>使用 <strong>Interruption Source</strong> 和 <strong>Ordered Interruption</strong> 属性可控制如何中断过渡。</p>
<p>在概念上，中断顺序就像这些过渡已排队，然后解析为一个有效过渡从第一个过渡插入到最后一个过渡。</p>
<h4 id="Interruption-Source-属性"><a href="#Interruption-Source-属性" class="headerlink" title="Interruption Source 属性"></a>Interruption Source 属性</h4><p><a class="link"   target="_blank" rel="noopener" href="https://docs.unity.cn/cn/2022.1/Manual/class-State.html" >AnyState <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a> 中的过渡始终首先添加在队列中，然后其他过渡根据 <strong>Interruption Source</strong> 的值排队：</p>
<table>
<thead>
<tr>
<th align="left"><strong>值</strong></th>
<th align="left"><strong>功能</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>None</strong></td>
<td align="left">不再添加任何过渡。</td>
</tr>
<tr>
<td align="left"><strong>Current State</strong></td>
<td align="left">将当前状态的过渡排队。</td>
</tr>
<tr>
<td align="left"><strong>Next State</strong></td>
<td align="left">使下一状态的过渡进行排队。</td>
</tr>
<tr>
<td align="left"><strong>Current State then Next State</strong></td>
<td align="left">将当前状态的过渡排序，然后将下一状态的过渡排序。</td>
</tr>
<tr>
<td align="left"><strong>Next State then Current State</strong></td>
<td align="left">将下一状态的过渡排队，然后将当前状态的过渡排队。</td>
</tr>
</tbody></table>
<h4 id="Ordered-Interruption-属性"><a href="#Ordered-Interruption-属性" class="headerlink" title="Ordered Interruption 属性"></a>Ordered Interruption 属性</h4><p><strong>Ordered Interruption</strong> 属性将更改队列的解析方式。</p>
<p>根据该属性的值，对队列的解析将在以下列出的不同时间结束。</p>
<table>
<thead>
<tr>
<th align="left"><strong>值</strong></th>
<th align="left"><strong>结束时间</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>选中</strong></td>
<td align="left">已找到有效过渡或当前过渡。</td>
</tr>
<tr>
<td align="left"><strong>取消选中</strong></td>
<td align="left">已找到有效过渡。</td>
</tr>
</tbody></table>
<p>只有 <a class="link"   target="_blank" rel="noopener" href="https://docs.unity.cn/cn/2022.1/Manual/class-State.html" >AnyState <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a> 过渡才能被自身中断。</p>
<p>要了解有关过渡中断的更多信息，请参阅 Unity 博客文章<a class="link"   target="_blank" rel="noopener" href="https://blogs.unity3d.com/2016/07/13/wait-ive-changed-my-mind-state-machine-transition-interruptions/" >状态机过渡中断 (State Machine Transition Interruptions) <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a>。</p>
<h3 id="过渡图"><a href="#过渡图" class="headerlink" title="过渡图"></a>过渡图</h3><p>要手动调整以上列出的设置，可直接在字段中输入数字或使用过渡图。在操作视图元素时，过渡图会修改上述值。</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/AnimatorTransitionSettingsAndGraph.svg"
                      alt="Inspector 中显示的过渡设置和过渡图"
                >Inspector 中显示的过渡设置和过渡图</p>
<p>请根据以下说明更改图形视图中的过渡属性：</p>
<ul>
<li>拖动 <strong>Duration “out”</strong> 标记可更改过渡的__持续时间 (Duration)__。</li>
<li>拖动 <strong>Duration “in”</strong> 标记可更改过渡的持续时间以及__退出时间 (Exit Time)__。</li>
<li>拖动目标状态可调整__过渡偏移 (Transition Offset)__。</li>
<li>拖动预览播放游标可在 Inspector 底部的预览窗口中快速预览动画混合（效果）。</li>
</ul>
<h3 id="混合树状态之间的过渡"><a href="#混合树状态之间的过渡" class="headerlink" title="混合树状态之间的过渡"></a>混合树状态之间的过渡</h3><p>如果属于此过渡的当前状态或下一状态是<a class="link"   target="_blank" rel="noopener" href="https://docs.unity.cn/cn/2022.1/Manual/class-BlendTree.html" >混合树 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a>状态，则混合树参数将出现在 Inspector 中。通过调整这些值可预览在混合树值设置为不同配置时的过渡表现情况。 如果混合树包含不同长度的剪辑，您应该测试在显示短剪辑和长剪辑时的过渡表现。调整这些值不会影响过渡在运行时的行为方式；它们仅用于帮助您预览不同条件下的过渡表现情况。</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/AnimatorTransitionInspectorShowingBlendtreeParams.png"
                      alt="当前状态或下一状态是混合树状态时显示的混合树参数预览控件。"
                >当前状态或下一状态是混合树状态时显示的混合树参数预览控件。</p>
<h3 id="条件"><a href="#条件" class="headerlink" title="条件"></a>条件</h3><p>一个过渡可以具有单个条件、多个条件或根本没有条件。如果过渡没有条件，Unity Editor 只会考虑 __Exit Time__，并在达到退出时间时发生过渡。如果过渡有一个或多个条件，则必须满足所有条件才能触发过渡。</p>
<p>一个条件包含：</p>
<ul>
<li>一个事件参数（在条件中考虑其值）。</li>
<li>条件谓词（需要时填写，例如，浮点数的小于或大于）。</li>
<li>一个参数值（需要时填写）。</li>
</ul>
<p>如果为该过渡启用 <strong>Has Exit Time</strong> 并有一个或多个条件，仅在状态的退出时间之后才会检查这些条件。这样可确保仅在动画的特定部分中进行过渡。</p>
<h3 id="设置枪械的位置"><a href="#设置枪械的位置" class="headerlink" title="设置枪械的位置"></a>设置枪械的位置</h3><p>通过角色的Root 来找到他的右手</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/image-20230202102407444.png"
                      alt="image-20230202102407444"
                ></p>
<p>将枪械放到右手</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/image-20230202102434944.png"
                      alt="image-20230202102434944"
                ></p>
<p>我们可以通过运行游戏来摆放枪械的位置，找到正确的位置，将它Copy下来，再粘贴</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/image-20230202102550248.png"
                      alt="image-20230202102550248"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/image-20230202102606763.png"
                      alt="image-20230202102606763"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/image-20230202102632975.png"
                      alt="image-20230202102632975"
                ></p>
<p>，但是再跑动的时候，枪械的位置不理想，</p>
<p>打开Animation，发现是只读</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/image-20230202102955288.png"
                      alt="image-20230202102955288"
                ></p>
<p>我们可以去到，对Rifle Run 复制一份 ， Ctrl + D;</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/image-20230202103026254.png"
                      alt="image-20230202103026254"
                ></p>
<p>将原先的名字修改</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/image-20230202103250432.png"
                      alt="image-20230202103250432"
                ></p>
<p>将原先的动画替换</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/image-20230202103327975.png"
                      alt="image-20230202103327975"
                ></p>
<p>这样便可以去修改 动画里面枪械的位置</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/image-20230202110010408.png"
                      alt="image-20230202110010408"
                ></p>
<h2 id="9-单位动画参数"><a href="#9-单位动画参数" class="headerlink" title="9. 单位动画参数"></a>9. 单位动画参数</h2><p>这后面就只记录比较重要的内容了，太累了</p>
<p>代码重构</p>
<div class="highlight-container" data-rel="C#"><figure class="iseeu highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Unit</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    [<span class="meta">SerializeField</span>] <span class="keyword">private</span> Animator unitController;</span><br><span class="line">    [<span class="meta">SerializeField</span>] <span class="keyword">private</span> <span class="built_in">bool</span> isWalking = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">float</span> moveSpeed = <span class="number">4.0f</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Vector3 targetPosition;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Update</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        MoveController();</span><br><span class="line">        UnitAnimSwitch();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">MoveController</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//停止的距离， 防止在移动到目的地时，发生抖动；</span></span><br><span class="line">        <span class="built_in">float</span> stopDistance = <span class="number">.1</span>f;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//这里不使用 Distance 是 为了减少开销，提高性能；</span></span><br><span class="line">        <span class="comment">// Vector3.Distance(transform.position - targetPosition);</span></span><br><span class="line">        <span class="keyword">if</span> ((transform.position - targetPosition).sqrMagnitude &gt; stopDistance * stopDistance)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">//移动方向 = 目标位置 - 原来位置 ，然后归一化；</span></span><br><span class="line">            Vector3 moveDirection = (targetPosition - transform.position).normalized;</span><br><span class="line"></span><br><span class="line">            transform.position += moveDirection * moveSpeed * Time.deltaTime;</span><br><span class="line"></span><br><span class="line">            isWalking = <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            isWalking = <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//如果按下鼠标左键，则移动到该点</span></span><br><span class="line">        <span class="keyword">if</span> (Input.GetMouseButton(<span class="number">0</span>))</span><br><span class="line">        &#123;</span><br><span class="line">            Move(MouseWorld.GetMousePosition());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Move</span>(<span class="params">Vector3 targetPosition</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">this</span>.targetPosition = targetPosition;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">UnitAnimSwitch</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        unitController.SetBool(<span class="string">&quot;IsWalking&quot;</span>, isWalking);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h2 id="10-移动时旋转"><a href="#10-移动时旋转" class="headerlink" title="10.移动时旋转"></a>10.移动时旋转</h2><div class="highlight-container" data-rel="C#"><figure class="iseeu highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Vector3.Lerp(float a, float b, float t);</span></span><br><span class="line">            <span class="comment">//线性插值，起始点，目标点 ，旋转的速度</span></span><br><span class="line">            <span class="built_in">float</span> rotateSpeed = <span class="number">8.0f</span>;</span><br><span class="line">            transform.forward = Vector3.Lerp(transform.forward, moveDirection, rotateSpeed * Time.deltaTime);</span><br></pre></td></tr></table></figure></div>



<h2 id="11-单位选择"><a href="#11-单位选择" class="headerlink" title="11.单位选择"></a>11.单位选择</h2><p>新建一个 叫 UnitActionSystem 的 空物体，新建一个UnitActionSystem 脚本</p>
<p>将点击移动的代码放入进去 ，</p>
<div class="highlight-container" data-rel="C#"><figure class="iseeu highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">UnitActionSystem</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    [<span class="meta">SerializeField</span>] <span class="keyword">private</span> Unit selectUnit;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Update</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//如果按下鼠标左键，则移动到该点</span></span><br><span class="line">        <span class="keyword">if</span> (Input.GetMouseButton(<span class="number">0</span>))</span><br><span class="line">        &#123;</span><br><span class="line">            selectUnit.Move(MouseWorld.GetMousePosition());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<div class="highlight-container" data-rel="C#"><figure class="iseeu highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//再Unit.cs 上添加</span></span><br><span class="line"><span class="comment">//游戏开始时，目标位置 = 当前位置，这样 多个角色就不会重叠在一起</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Awake</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        targetPosition = transform.position;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></div>

<p>添加一个碰撞体，勾选is Trigger ，确保我们能够点到他</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/image-20230202115942770.png"
                      alt="image-20230202115942770"
                ></p>
<p>单元检测代码：</p>
<div class="highlight-container" data-rel="C#"><figure class="iseeu highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">UnitActionSystem</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    [<span class="meta">SerializeField</span>] <span class="keyword">private</span> Unit selectUnit;</span><br><span class="line">    [<span class="meta">SerializeField</span>] <span class="keyword">private</span> LayerMask unitLayerMask;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Update</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//如果按下鼠标左键，则移动到该点</span></span><br><span class="line">        <span class="keyword">if</span> (Input.GetMouseButton(<span class="number">0</span>))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">//如果检测到了Unit,则返回 ，这样我们才可以选择地面移动</span></span><br><span class="line">            <span class="keyword">if</span> (TryHandleUnitSelection()) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//如果检测到的不是Unit 而是地面则移动,并且selectUnit 不能为空</span></span><br><span class="line">            <span class="keyword">if</span> (selectUnit != <span class="literal">null</span>)</span><br><span class="line">                selectUnit.Move(MouseWorld.GetMousePosition());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="built_in">bool</span> <span class="title">TryHandleUnitSelection</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Ray ray = Camera.main.ScreenPointToRay(Input.mousePosition);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (Physics.Raycast(ray, <span class="keyword">out</span> RaycastHit unitInfo, <span class="built_in">float</span>.MaxValue, unitLayerMask))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">//TryGetComponent：</span></span><br><span class="line">            <span class="comment">//bool 如果发现组件，则返回 /true/，否则返回 /false/。</span></span><br><span class="line">            <span class="comment">// 获取指定类型的组件（如果存在）。</span></span><br><span class="line">            <span class="comment">// TryGetComponent 将尝试获取给定类型的组件。与 GameObject.GetComponent 相比的显著差异在于，如果请求的组件不存在，则此方法不在  编辑器中进行分配。</span></span><br><span class="line">            <span class="keyword">if</span> (unitInfo.transform.TryGetComponent&lt;Unit&gt;(<span class="keyword">out</span> Unit unit))</span><br><span class="line">            &#123;</span><br><span class="line">                selectUnit = unit;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//等于上面一个if语句</span></span><br><span class="line">            <span class="comment">// Unit unit1 = unitInfo.transform.GetComponent&lt;Unit&gt;();</span></span><br><span class="line">            <span class="comment">// if (unit1 != null)</span></span><br><span class="line">            <span class="comment">// &#123;</span></span><br><span class="line">            <span class="comment">//     selectUnit = unitInfo.collider.GetComponent&lt;Unit&gt;();</span></span><br><span class="line">            <span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<p>我们要确保我们的单位选择系统要早点执行，可以再ProjectSetting上进行调整，调整到比默认时间快</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/image-20230202125957213.png"
                      alt="image-20230202125957213"
                ></p>
<h2 id="12-选择单元的视觉效果"><a href="#12-选择单元的视觉效果" class="headerlink" title="12.选择单元的视觉效果"></a>12.选择单元的视觉效果</h2><p>新建一个 UnitSlectVisual 的脚本</p>
<div class="highlight-container" data-rel="C#"><figure class="iseeu highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">UnitSelectVisual</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    [<span class="meta">SerializeField</span>] <span class="keyword">private</span> Unit unit;</span><br><span class="line"></span><br><span class="line">    [<span class="meta">SerializeField</span>] <span class="keyword">private</span> MeshRenderer meshRenderer;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Awake</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        meshRenderer = GetComponent&lt;MeshRenderer&gt;();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<p>这里用到了委托的方法</p>
<h3 id="invoke和begininvoke-区别"><a href="#invoke和begininvoke-区别" class="headerlink" title="invoke和begininvoke 区别"></a><a class="link"   target="_blank" rel="noopener" href="http://blog.csdn.net/thebesttome/article/details/7589856" >invoke和begininvoke 区别 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></h3><p>一直对invoke和begininvoke的使用和概念比较混乱，这两天看了些资料，对这两个的用法和原理有了些新的认识和理解。</p>
<p> 首先说下，invoke和begininvoke的使用有两种情况：</p>
<ol>
<li><p>control中的invoke、begininvoke。</p>
</li>
<li><p>delegrate中的invoke、begininvoke。</p>
</li>
</ol>
<p> 这两种情况是不同的，我们这里要讲的是第1种。下面我们在来说下.NET中对invoke和begininvoke的官方定义。</p>
<p> control.invoke(参数delegate)方法:在<strong>拥有</strong>此控件的基础窗口句柄的线程上<strong>执行</strong>指定的委托。</p>
<p> control.begininvoke(参数delegate)方法:在<strong>创建</strong>控件的基础句柄所在线程上<strong>异步执行</strong>指定委托。</p>
<p> 根据这两个概念我们大致理解invoke表是<strong>同步</strong>、begininvoke表示<strong>异步</strong>。</p>
<p><strong>如果你的后台线程在更新一个UI控件的状态后不需要等待，而是要继续往下处理，那么你就应该使用BeginInvoke来进行异步处理。</strong></p>
<p><strong>如果你的后台线程需要操作UI控件，并且需要等到该操作执行完毕才能继续执行，那么你就应该使用Invoke。</strong></p>
<div class="highlight-container" data-rel="C#"><figure class="iseeu highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ? 等于 if(onselectUnitChanged != null)</span></span><br><span class="line">OnSelectUnitChanged?.Invoke(<span class="keyword">this</span>, EventArgs.Empty);</span><br><span class="line"></span><br></pre></td></tr></table></figure></div>



<div class="highlight-container" data-rel="C#"><figure class="iseeu highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">UnitSelectVisual</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    [<span class="meta">SerializeField</span>] <span class="keyword">private</span> Unit unit;</span><br><span class="line"></span><br><span class="line">    [<span class="meta">SerializeField</span>] <span class="keyword">private</span> MeshRenderer meshRenderer;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Awake</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        meshRenderer = GetComponent&lt;MeshRenderer&gt;();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Start</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//切换角色事件 注册 </span></span><br><span class="line">        UnitActionSystem.Instance.OnSelectUnitChanged += UnitActionSystem_OnSelectedUnitChanged;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">UnitActionSystem_OnSelectedUnitChanged</span>(<span class="params"><span class="built_in">object</span> sender, EventArgs empty</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        UpdateVisual();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//更新</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">UpdateVisual</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (UnitActionSystem.Instance.GetSelectedUnit() == unit)</span><br><span class="line">        &#123;</span><br><span class="line">            meshRenderer.enabled = <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            meshRenderer.enabled = <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></div>





<h1 id="Part3-网格系统和相机"><a href="#Part3-网格系统和相机" class="headerlink" title="Part3.网格系统和相机"></a>Part3.网格系统和相机</h1><h2 id="1-网格系统设计"><a href="#1-网格系统设计" class="headerlink" title="1.网格系统设计"></a>1.网格系统设计</h2><p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/image-20230202165020609.png"
                      alt=" "
                ></p>
<h2 id="2-网格系统"><a href="#2-网格系统" class="headerlink" title="2.网格系统"></a>2.网格系统</h2><p>新建一个GridSystem脚本</p>
 <div class="highlight-container" data-rel="C#"><figure class="iseeu highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">GridSystem</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">int</span> width;</span><br><span class="line">    <span class="built_in">int</span> height;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">GridSystem</span>(<span class="params"><span class="built_in">int</span> width, <span class="built_in">int</span> height</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">this</span>.width = width;</span><br><span class="line">        <span class="keyword">this</span>.height = height;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//网格绘制 ，沿着 z 轴绘制</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> x = <span class="number">0</span>; x &lt; width; x++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="built_in">int</span> z = <span class="number">0</span>; z &lt; height; z++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">//绘制线 ， 并加上一点偏移 </span></span><br><span class="line">                Debug.DrawLine(GetWorldPosition(x, z), GetWorldPosition(x, z) + Vector3.right * <span class="number">.2</span>f, Color.white, <span class="number">1000</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//获取世界坐标系</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Vector3 <span class="title">GetWorldPosition</span>(<span class="params"><span class="built_in">int</span> x, <span class="built_in">int</span> z</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Vector3(x, <span class="number">0</span>, z);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>新建一个测试脚本</p>
<div class="highlight-container" data-rel="C#"><figure class="iseeu highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Testing</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Start</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">new</span> GridSystem(<span class="number">10</span>, <span class="number">10</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>在运行游戏的时候 记得打开Gizmos，有白色的线段则 成功。</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/image-20230202181304333.png"
                      alt="image-20230202181304333"
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/image-20230202181340001.png"
                      alt="image-20230202181340001"
                ></p>

            </div>

            

            

            
                <div class="article-nav">
                    
                        <div class="article-prev">
                            <a class="prev"
                            rel="prev"
                            href="/2023/02/02/%E4%BC%98%E7%A7%80%E7%9A%84%E6%96%87%E7%AB%A0/"
                            >
                                <span class="left arrow-icon flex-center">
                                    <i class="fa-solid fa-chevron-left"></i>
                                </span>
                                <span class="title flex-center">
                                    <span class="post-nav-title-item">优秀的文章</span>
                                    <span class="post-nav-item">Prev posts</span>
                                </span>
                            </a>
                        </div>
                    
                    
                        <div class="article-next">
                            <a class="next"
                            rel="next"
                            href="/2023/01/30/%E5%9F%BA%E4%BA%8EMVC%E6%9E%B6%E6%9E%84%E7%9A%84UI%E8%AE%BE%E8%AE%A1/"
                            >
                                <span class="title flex-center">
                                    <span class="post-nav-title-item">基于MVC架构的UI设计</span>
                                    <span class="post-nav-item">Next posts</span>
                                </span>
                                <span class="right arrow-icon flex-center">
                                    <i class="fa-solid fa-chevron-right"></i>
                                </span>
                            </a>
                        </div>
                    
                </div>
            

            
        </div>

        
            <div class="toc-content-container">
                <div class="post-toc-wrap">
    <div class="post-toc">
        <div class="toc-title">On this page</div>
        <div class="page-title">策略游戏开发</div>
        <ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Part1-%E5%90%8E%E6%9C%9F%E5%A4%84%E7%90%86%EF%BC%88%E8%BF%99%E4%B8%80%E4%BA%9B%E6%95%88%E6%9E%9C%E6%8C%BA%E4%B8%8D%E9%94%99%E7%9A%84%EF%BC%8C%E5%80%BC%E5%BE%97%E8%87%AA%E5%B7%B1%E5%8E%BB%E5%B0%9D%E8%AF%95%E4%B8%80%E4%B8%8B%EF%BC%89"><span class="nav-text">Part1.后期处理（这一些效果挺不错的，值得自己去尝试一下）</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Part2-%E5%8D%95%E5%85%83%E8%BF%90%E5%8A%A8%E4%B8%8E%E9%80%89%E6%8B%A9"><span class="nav-text">Part2.单元运动与选择</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-%E9%80%89%E6%8B%A9Pivot-%E8%80%8C%E4%B8%8D%E6%98%AFCenter-%EF%BC%9A"><span class="nav-text">1.选择Pivot 而不是Center ：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-%E5%8D%95%E4%BD%8D%E7%A7%BB%E5%8A%A8"><span class="nav-text">2.单位移动</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-%E9%BC%A0%E6%A0%87%E5%B0%84%E7%BA%BF"><span class="nav-text">3.鼠标射线</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-%E9%BC%A0%E6%A0%87%E4%B8%96%E7%95%8C%E5%9D%90%E6%A0%87"><span class="nav-text">4.鼠标世界坐标</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-%E9%80%9A%E8%BF%87%E9%BC%A0%E6%A0%87%E7%82%B9%E5%87%BB%E6%9D%A5%E8%BF%9B%E8%A1%8C%E7%A7%BB%E5%8A%A8"><span class="nav-text">5.通过鼠标点击来进行移动</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-public-%E4%B8%8E-SerializeField-private"><span class="nav-text">6.public 与[SerializeField] private</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E4%BD%BF%E7%94%A8%E6%9C%89%E6%97%B6%E5%80%99%E4%B8%8D%E4%BD%BF%E7%94%A8public-%E8%80%8C%E4%BD%BF%E7%94%A8-SerializeField-private-%EF%BC%9F"><span class="nav-text">为什么要使用有时候不使用public 而使用 [SerializeField] private ？</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-%E8%AE%BE%E7%BD%AE%E5%8A%A8%E7%94%BB"><span class="nav-text">7.设置动画</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8-%E5%8A%A8%E7%94%BB%E6%8E%A7%E5%88%B6%E5%99%A8"><span class="nav-text">8.动画控制器</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8A%A8%E7%94%BB%E8%BF%87%E6%B8%A1"><span class="nav-text">动画过渡</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BF%87%E6%B8%A1%E5%B1%9E%E6%80%A7"><span class="nav-text">过渡属性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BF%87%E6%B8%A1%E4%B8%AD%E6%96%AD"><span class="nav-text">过渡中断</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Interruption-Source-%E5%B1%9E%E6%80%A7"><span class="nav-text">Interruption Source 属性</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Ordered-Interruption-%E5%B1%9E%E6%80%A7"><span class="nav-text">Ordered Interruption 属性</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BF%87%E6%B8%A1%E5%9B%BE"><span class="nav-text">过渡图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B7%B7%E5%90%88%E6%A0%91%E7%8A%B6%E6%80%81%E4%B9%8B%E9%97%B4%E7%9A%84%E8%BF%87%E6%B8%A1"><span class="nav-text">混合树状态之间的过渡</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9D%A1%E4%BB%B6"><span class="nav-text">条件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AE%BE%E7%BD%AE%E6%9E%AA%E6%A2%B0%E7%9A%84%E4%BD%8D%E7%BD%AE"><span class="nav-text">设置枪械的位置</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#9-%E5%8D%95%E4%BD%8D%E5%8A%A8%E7%94%BB%E5%8F%82%E6%95%B0"><span class="nav-text">9. 单位动画参数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#10-%E7%A7%BB%E5%8A%A8%E6%97%B6%E6%97%8B%E8%BD%AC"><span class="nav-text">10.移动时旋转</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#11-%E5%8D%95%E4%BD%8D%E9%80%89%E6%8B%A9"><span class="nav-text">11.单位选择</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#12-%E9%80%89%E6%8B%A9%E5%8D%95%E5%85%83%E7%9A%84%E8%A7%86%E8%A7%89%E6%95%88%E6%9E%9C"><span class="nav-text">12.选择单元的视觉效果</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#invoke%E5%92%8Cbegininvoke-%E5%8C%BA%E5%88%AB"><span class="nav-text">invoke和begininvoke 区别 </span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Part3-%E7%BD%91%E6%A0%BC%E7%B3%BB%E7%BB%9F%E5%92%8C%E7%9B%B8%E6%9C%BA"><span class="nav-text">Part3.网格系统和相机</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-%E7%BD%91%E6%A0%BC%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1"><span class="nav-text">1.网格系统设计</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-%E7%BD%91%E6%A0%BC%E7%B3%BB%E7%BB%9F"><span class="nav-text">2.网格系统</span></a></li></ol></li></ol>

    </div>
</div>
            </div>
        
    </div>
</div>


                

            </div>



        </div>

        <div class="page-main-content-bottom">
            <footer class="footer">
    <div class="info-container">
        <div class="copyright-info info-item">
            &copy;
            
              <span>2022</span>
              -
            
            2023&nbsp;<i class="fa-solid fa-heart icon-animate"></i>&nbsp;<a href="/">A1ent. All Rights Reserved.</a>
        </div>
        
            <script async  src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
            <div class="website-count info-item">
                
                    <span id="busuanzi_container_site_uv">
                        Visitor Count&nbsp;<span id="busuanzi_value_site_uv"></span>&ensp;
                    </span>
                
                
                    <span id="busuanzi_container_site_pv">
                        Totalviews&nbsp;<span id="busuanzi_value_site_pv"></span>
                    </span>
                
            </div>
        
        <div class="theme-info info-item">
            Powered by <a target="_blank" href="https://hexo.io">Hexo</a>&nbsp;|&nbsp;Theme&nbsp;<a class="theme-version" target="_blank" href="https://github.com/EvanNotFound/hexo-theme-redefine">Redefine v1.0.0</a>
        </div>
        
        
        <script async  defer>
            function odometer_init(){
                    let el = document.getElementsByClassName('odometer');
                    for (i = 0; i < el.length; i++) {
                        od = new Odometer({
                            el: el[i],
                            format: '( ddd).dd',
                            duration: 200
                        });
                    }
            }
            odometer_init();
        </script>
        <div id="start_time_div" style="display:none">
            2022/8/17 11:45:14
        </div>
        
            <div>
                Blog up for <span class="odometer" id="runtime_days" ></span> days <span class="odometer" id="runtime_hours"></span> hrs <span class="odometer" id="runtime_minutes"></span> Min <span class="odometer" id="runtime_seconds"></span> Sec
            </div>
        
        

        
        
    </div>  
</footer>
        </div>
    </div>

    
        <div class="post-tools">
            <div class="post-tools-container">
    <ul class="tools-list">
        <!-- TOC aside toggle -->
        
            <li class="right-bottom-tools page-aside-toggle">
                <i class="fa-regular fa-outdent"></i>
            </li>
        

        <!-- go comment -->
        
    </ul>
</div>

        </div>
    

    <div class="right-bottom-side-tools">
        <div class="side-tools-container">
    <ul class="unfolded-tools-list">
        <li class="right-bottom-tools tool-font-adjust-plus flex-center">
            <i class="fa-regular fa-magnifying-glass-plus"></i>
        </li>

        <li class="right-bottom-tools tool-font-adjust-minus flex-center">
            <i class="fa-regular fa-magnifying-glass-minus"></i>
        </li>

        <li class="right-bottom-tools tool-expand-width flex-center">
            <i class="fa-regular fa-expand"></i>
        </li>

        <li class="right-bottom-tools tool-dark-light-toggle flex-center">
            <i class="fa-regular fa-moon"></i>
        </li>

        <!-- rss -->
        

        

        <li class="right-bottom-tools tool-scroll-to-bottom flex-center">
            <i class="fa-regular fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="folded-tools-list">
        <li class="right-bottom-tools tool-toggle-show flex-center">
            <i class="fa-regular fa-cog fa-spin"></i>
        </li>
        
            <li class="right-bottom-tools tool-scroll-to-top flex-center">
                <i class="arrow-up fas fa-arrow-up"></i>
                <span class="percent"></span>
            </li>
        
    </ul>
</div>

    </div>

    <div class="image-viewer-container">
    <img src="">
</div>


    
        <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
          <span class="search-input-field-pre">
            <i class="fa-solid fa-keyboard"></i>
          </span>
            <div class="search-input-container">
                <input autocomplete="off"
                       autocorrect="off"
                       autocapitalize="off"
                       placeholder="Search..."
                       spellcheck="false"
                       type="search"
                       class="search-input"
                >
            </div>
            <span class="popup-btn-close">
                <i class="fa-solid fa-times"></i>
            </span>
        </div>
        <div id="search-result">
            <div id="no-result">
                <i class="fa-solid fa-spinner fa-spin-pulse fa-5x fa-fw"></i>
            </div>
        </div>
    </div>
</div>

    


</main>



<script src="//evan.beee.top/projects/hexo-theme-redefine/v1.0.0/source/js/utils.js"></script><script src="//evan.beee.top/projects/hexo-theme-redefine/v1.0.0/source/js/main.js"></script><script src="//evan.beee.top/projects/hexo-theme-redefine/v1.0.0/source/js/layouts/menu-shrink.js"></script><script src="//evan.beee.top/projects/hexo-theme-redefine/v1.0.0/source/js/tools/go-top-bottom.js"></script><script src="//evan.beee.top/projects/hexo-theme-redefine/v1.0.0/source/js/tools/dark-light-toggle.js"></script>


    <script src="//evan.beee.top/projects/hexo-theme-redefine/v1.0.0/source/js/tools/local-search.js"></script>



    <script src="//evan.beee.top/projects/hexo-theme-redefine/v1.0.0/source/js/tools/code-block.js"></script>



    <script src="//evan.beee.top/projects/hexo-theme-redefine/v1.0.0/source/js/layouts/lazyload.js"></script>



    <script src="//evan.beee.top/projects/hexo-theme-redefine/v1.0.0/source/js/tools/runtime.js"></script>
    <script src="//evan.beee.top/projects/hexo-theme-redefine/v1.0.0/source/js/layouts/odometer.min.js"></script>
    <link rel="stylesheet" href="//evan.beee.top/projects/hexo-theme-redefine/v1.0.0/source/css/odometer-theme-minimal.css">


<div class="post-scripts">
    
        <script src="//evan.beee.top/projects/hexo-theme-redefine/v1.0.0/source/js/tools/toc-toggle.js"></script><script src="//evan.beee.top/projects/hexo-theme-redefine/v1.0.0/source/js/libs/anime.min.js"></script><script src="//evan.beee.top/projects/hexo-theme-redefine/v1.0.0/source/js/layouts/toc.js"></script>
    
    
</div>



</body>
</html>
